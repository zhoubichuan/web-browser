<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>二十六.内存管理 | 浏览器学习笔记</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="个人总结的vuepress学习技术文档-语法">
    <meta name="keywords" content="vuepress,最新技术文档,vuepress语法,markdown语法">
    
    <link rel="preload" href="/web-browser/assets/css/0.styles.5eab7013.css" as="style"><link rel="preload" href="/web-browser/assets/js/app.91129274.js" as="script"><link rel="preload" href="/web-browser/assets/js/2.cc19c250.js" as="script"><link rel="preload" href="/web-browser/assets/js/7.93528168.js" as="script"><link rel="preload" href="/web-browser/assets/js/3.2443f8b6.js" as="script"><link rel="prefetch" href="/web-browser/assets/js/10.1d8398aa.js"><link rel="prefetch" href="/web-browser/assets/js/100.9b474874.js"><link rel="prefetch" href="/web-browser/assets/js/101.69bcbbb6.js"><link rel="prefetch" href="/web-browser/assets/js/102.d5de1207.js"><link rel="prefetch" href="/web-browser/assets/js/103.64c000ff.js"><link rel="prefetch" href="/web-browser/assets/js/104.1a53ebbb.js"><link rel="prefetch" href="/web-browser/assets/js/105.66a5b300.js"><link rel="prefetch" href="/web-browser/assets/js/106.e3ccd360.js"><link rel="prefetch" href="/web-browser/assets/js/107.9a15d44b.js"><link rel="prefetch" href="/web-browser/assets/js/108.59b55975.js"><link rel="prefetch" href="/web-browser/assets/js/109.617a59a4.js"><link rel="prefetch" href="/web-browser/assets/js/11.e06ad282.js"><link rel="prefetch" href="/web-browser/assets/js/110.6f50d149.js"><link rel="prefetch" href="/web-browser/assets/js/111.32fe028e.js"><link rel="prefetch" href="/web-browser/assets/js/112.db34e1d3.js"><link rel="prefetch" href="/web-browser/assets/js/113.6981c56c.js"><link rel="prefetch" href="/web-browser/assets/js/114.f5efbd40.js"><link rel="prefetch" href="/web-browser/assets/js/115.0f787f1a.js"><link rel="prefetch" href="/web-browser/assets/js/116.4586fc15.js"><link rel="prefetch" href="/web-browser/assets/js/117.abaae932.js"><link rel="prefetch" href="/web-browser/assets/js/118.b9b4d884.js"><link rel="prefetch" href="/web-browser/assets/js/119.a1e2a2f7.js"><link rel="prefetch" href="/web-browser/assets/js/12.6e4a775a.js"><link rel="prefetch" href="/web-browser/assets/js/120.e557fae8.js"><link rel="prefetch" href="/web-browser/assets/js/121.8096485b.js"><link rel="prefetch" href="/web-browser/assets/js/122.b2bed1fc.js"><link rel="prefetch" href="/web-browser/assets/js/123.c14d5c61.js"><link rel="prefetch" href="/web-browser/assets/js/124.edde662e.js"><link rel="prefetch" href="/web-browser/assets/js/125.f14a6370.js"><link rel="prefetch" href="/web-browser/assets/js/126.291aa6c0.js"><link rel="prefetch" href="/web-browser/assets/js/127.ddac8358.js"><link rel="prefetch" href="/web-browser/assets/js/128.6b6d7397.js"><link rel="prefetch" href="/web-browser/assets/js/129.d46484fd.js"><link rel="prefetch" href="/web-browser/assets/js/13.28d1bb10.js"><link rel="prefetch" href="/web-browser/assets/js/130.780c8fd7.js"><link rel="prefetch" href="/web-browser/assets/js/131.c194fbd8.js"><link rel="prefetch" href="/web-browser/assets/js/132.189f6aa2.js"><link rel="prefetch" href="/web-browser/assets/js/133.0d1a6b4f.js"><link rel="prefetch" href="/web-browser/assets/js/134.6662e53d.js"><link rel="prefetch" href="/web-browser/assets/js/135.c8dc63c0.js"><link rel="prefetch" href="/web-browser/assets/js/136.1ffffa81.js"><link rel="prefetch" href="/web-browser/assets/js/137.22d10129.js"><link rel="prefetch" href="/web-browser/assets/js/138.c32239bd.js"><link rel="prefetch" href="/web-browser/assets/js/139.8e4186e6.js"><link rel="prefetch" href="/web-browser/assets/js/14.25ee958f.js"><link rel="prefetch" href="/web-browser/assets/js/140.f8f4f322.js"><link rel="prefetch" href="/web-browser/assets/js/141.4b29fe0d.js"><link rel="prefetch" href="/web-browser/assets/js/142.d7313b9c.js"><link rel="prefetch" href="/web-browser/assets/js/143.c1a95ac1.js"><link rel="prefetch" href="/web-browser/assets/js/144.755d843d.js"><link rel="prefetch" href="/web-browser/assets/js/145.62e12ba5.js"><link rel="prefetch" href="/web-browser/assets/js/146.473f3f8b.js"><link rel="prefetch" href="/web-browser/assets/js/147.65d0755c.js"><link rel="prefetch" href="/web-browser/assets/js/148.e93cd1fe.js"><link rel="prefetch" href="/web-browser/assets/js/149.abcbcddf.js"><link rel="prefetch" href="/web-browser/assets/js/15.d03a99a5.js"><link rel="prefetch" href="/web-browser/assets/js/150.342ab519.js"><link rel="prefetch" href="/web-browser/assets/js/151.0be0c7a8.js"><link rel="prefetch" href="/web-browser/assets/js/152.552705d8.js"><link rel="prefetch" href="/web-browser/assets/js/153.4a7a54c8.js"><link rel="prefetch" href="/web-browser/assets/js/154.cbd4bb60.js"><link rel="prefetch" href="/web-browser/assets/js/155.66316a10.js"><link rel="prefetch" href="/web-browser/assets/js/156.04b4000e.js"><link rel="prefetch" href="/web-browser/assets/js/157.b68564a1.js"><link rel="prefetch" href="/web-browser/assets/js/158.891f4c6c.js"><link rel="prefetch" href="/web-browser/assets/js/159.351220b1.js"><link rel="prefetch" href="/web-browser/assets/js/16.f1397c40.js"><link rel="prefetch" href="/web-browser/assets/js/160.c2f6dea9.js"><link rel="prefetch" href="/web-browser/assets/js/161.af87ed36.js"><link rel="prefetch" href="/web-browser/assets/js/162.32331bb3.js"><link rel="prefetch" href="/web-browser/assets/js/163.f8b913c3.js"><link rel="prefetch" href="/web-browser/assets/js/164.6c2a908d.js"><link rel="prefetch" href="/web-browser/assets/js/165.31066827.js"><link rel="prefetch" href="/web-browser/assets/js/166.9339b2be.js"><link rel="prefetch" href="/web-browser/assets/js/167.aedcf388.js"><link rel="prefetch" href="/web-browser/assets/js/168.a61873e5.js"><link rel="prefetch" href="/web-browser/assets/js/169.8ba16567.js"><link rel="prefetch" href="/web-browser/assets/js/17.11494015.js"><link rel="prefetch" href="/web-browser/assets/js/170.f3860f23.js"><link rel="prefetch" href="/web-browser/assets/js/171.a11cea2f.js"><link rel="prefetch" href="/web-browser/assets/js/172.dd9be968.js"><link rel="prefetch" href="/web-browser/assets/js/173.2a4db90b.js"><link rel="prefetch" href="/web-browser/assets/js/174.a841effa.js"><link rel="prefetch" href="/web-browser/assets/js/175.03502da3.js"><link rel="prefetch" href="/web-browser/assets/js/176.1f5ff919.js"><link rel="prefetch" href="/web-browser/assets/js/177.deadd7dc.js"><link rel="prefetch" href="/web-browser/assets/js/178.889936f1.js"><link rel="prefetch" href="/web-browser/assets/js/179.8b91635f.js"><link rel="prefetch" href="/web-browser/assets/js/18.07c2e73e.js"><link rel="prefetch" href="/web-browser/assets/js/180.6aa4250c.js"><link rel="prefetch" href="/web-browser/assets/js/181.522224c7.js"><link rel="prefetch" href="/web-browser/assets/js/182.555e5a0b.js"><link rel="prefetch" href="/web-browser/assets/js/19.29f92139.js"><link rel="prefetch" href="/web-browser/assets/js/20.70ee7248.js"><link rel="prefetch" href="/web-browser/assets/js/21.76bf5d6b.js"><link rel="prefetch" href="/web-browser/assets/js/22.452f8850.js"><link rel="prefetch" href="/web-browser/assets/js/23.4a3cf2c3.js"><link rel="prefetch" href="/web-browser/assets/js/24.a74eb1af.js"><link rel="prefetch" href="/web-browser/assets/js/25.7e955855.js"><link rel="prefetch" href="/web-browser/assets/js/26.8fc83726.js"><link rel="prefetch" href="/web-browser/assets/js/27.171e4b47.js"><link rel="prefetch" href="/web-browser/assets/js/28.04e89e5a.js"><link rel="prefetch" href="/web-browser/assets/js/29.d5a26b71.js"><link rel="prefetch" href="/web-browser/assets/js/30.96f0892d.js"><link rel="prefetch" href="/web-browser/assets/js/31.7060ed67.js"><link rel="prefetch" href="/web-browser/assets/js/32.9ce90443.js"><link rel="prefetch" href="/web-browser/assets/js/33.19d5fdc2.js"><link rel="prefetch" href="/web-browser/assets/js/34.5440d448.js"><link rel="prefetch" href="/web-browser/assets/js/35.d6310f9b.js"><link rel="prefetch" href="/web-browser/assets/js/36.a3f4ff38.js"><link rel="prefetch" href="/web-browser/assets/js/37.842fb7b8.js"><link rel="prefetch" href="/web-browser/assets/js/38.dd211add.js"><link rel="prefetch" href="/web-browser/assets/js/39.14ea89fc.js"><link rel="prefetch" href="/web-browser/assets/js/4.07673aee.js"><link rel="prefetch" href="/web-browser/assets/js/40.abe9842e.js"><link rel="prefetch" href="/web-browser/assets/js/41.06f62c9b.js"><link rel="prefetch" href="/web-browser/assets/js/42.329c1bc5.js"><link rel="prefetch" href="/web-browser/assets/js/43.60335fde.js"><link rel="prefetch" href="/web-browser/assets/js/44.a49ea65a.js"><link rel="prefetch" href="/web-browser/assets/js/45.54ad459e.js"><link rel="prefetch" href="/web-browser/assets/js/46.49453903.js"><link rel="prefetch" href="/web-browser/assets/js/47.4deb6876.js"><link rel="prefetch" href="/web-browser/assets/js/48.db2ee629.js"><link rel="prefetch" href="/web-browser/assets/js/49.b4c1c221.js"><link rel="prefetch" href="/web-browser/assets/js/5.d91d4bc3.js"><link rel="prefetch" href="/web-browser/assets/js/50.a542d3a6.js"><link rel="prefetch" href="/web-browser/assets/js/51.9a463c4d.js"><link rel="prefetch" href="/web-browser/assets/js/52.c45db145.js"><link rel="prefetch" href="/web-browser/assets/js/53.0a8449c6.js"><link rel="prefetch" href="/web-browser/assets/js/54.c6eb961f.js"><link rel="prefetch" href="/web-browser/assets/js/55.4ddf9e52.js"><link rel="prefetch" href="/web-browser/assets/js/56.843165f5.js"><link rel="prefetch" href="/web-browser/assets/js/57.84e7123e.js"><link rel="prefetch" href="/web-browser/assets/js/58.e3b26656.js"><link rel="prefetch" href="/web-browser/assets/js/59.eb385a57.js"><link rel="prefetch" href="/web-browser/assets/js/6.35b65d68.js"><link rel="prefetch" href="/web-browser/assets/js/60.7fff1811.js"><link rel="prefetch" href="/web-browser/assets/js/61.85945488.js"><link rel="prefetch" href="/web-browser/assets/js/62.5a0e16e5.js"><link rel="prefetch" href="/web-browser/assets/js/63.7036b54f.js"><link rel="prefetch" href="/web-browser/assets/js/64.3f1973e4.js"><link rel="prefetch" href="/web-browser/assets/js/65.2d789c3e.js"><link rel="prefetch" href="/web-browser/assets/js/66.07b7a2b8.js"><link rel="prefetch" href="/web-browser/assets/js/67.07c9aa21.js"><link rel="prefetch" href="/web-browser/assets/js/68.444e07ff.js"><link rel="prefetch" href="/web-browser/assets/js/69.a11f4b53.js"><link rel="prefetch" href="/web-browser/assets/js/70.347a0ff9.js"><link rel="prefetch" href="/web-browser/assets/js/71.7b1f050c.js"><link rel="prefetch" href="/web-browser/assets/js/72.7ce12f19.js"><link rel="prefetch" href="/web-browser/assets/js/73.4d4da7e0.js"><link rel="prefetch" href="/web-browser/assets/js/74.5a65d39d.js"><link rel="prefetch" href="/web-browser/assets/js/75.7a1773ba.js"><link rel="prefetch" href="/web-browser/assets/js/76.410f2877.js"><link rel="prefetch" href="/web-browser/assets/js/77.ae1972b1.js"><link rel="prefetch" href="/web-browser/assets/js/78.2352d486.js"><link rel="prefetch" href="/web-browser/assets/js/79.59685224.js"><link rel="prefetch" href="/web-browser/assets/js/8.622282db.js"><link rel="prefetch" href="/web-browser/assets/js/80.1e667efd.js"><link rel="prefetch" href="/web-browser/assets/js/81.49bd73a7.js"><link rel="prefetch" href="/web-browser/assets/js/82.bfa42d99.js"><link rel="prefetch" href="/web-browser/assets/js/83.1ebd15f7.js"><link rel="prefetch" href="/web-browser/assets/js/84.683153b2.js"><link rel="prefetch" href="/web-browser/assets/js/85.56506e5a.js"><link rel="prefetch" href="/web-browser/assets/js/86.5fde7bb8.js"><link rel="prefetch" href="/web-browser/assets/js/87.fb2c9a08.js"><link rel="prefetch" href="/web-browser/assets/js/88.5685d5e9.js"><link rel="prefetch" href="/web-browser/assets/js/89.2cab6cb2.js"><link rel="prefetch" href="/web-browser/assets/js/9.5b2b6c2e.js"><link rel="prefetch" href="/web-browser/assets/js/90.a5e69bf1.js"><link rel="prefetch" href="/web-browser/assets/js/91.7cc92474.js"><link rel="prefetch" href="/web-browser/assets/js/92.6cdbf666.js"><link rel="prefetch" href="/web-browser/assets/js/93.02e28d39.js"><link rel="prefetch" href="/web-browser/assets/js/94.795aba58.js"><link rel="prefetch" href="/web-browser/assets/js/95.daed3ea4.js"><link rel="prefetch" href="/web-browser/assets/js/96.73b7e125.js"><link rel="prefetch" href="/web-browser/assets/js/97.873bb711.js"><link rel="prefetch" href="/web-browser/assets/js/98.59c0c61b.js"><link rel="prefetch" href="/web-browser/assets/js/99.e7ca9bcd.js">
    <link rel="stylesheet" href="/web-browser/assets/css/0.styles.5eab7013.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/web-browser/" class="home-link router-link-active"><!----> <span class="site-name">浏览器学习笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础知识" class="dropdown-title"><span class="title">基础知识</span> <span class="arrow down"></span></button> <button type="button" aria-label="基础知识" class="mobile-dropdown-title"><span class="title">基础知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web-browser/base/engine/1.index.html" class="nav-link">
  一.DOM
</a></li><li class="dropdown-item"><!----> <a href="/web-browser/base/project/1.index.html" class="nav-link">
  二.浏览器 API
</a></li><li class="dropdown-item"><!----> <a href="/web-browser/base/vue2.x/1.index.html" class="nav-link">
  三.网络
</a></li><li class="dropdown-item"><!----> <a href="/web-browser/base/vue3.x/1.index.html" class="nav-link">
  四.权限
</a></li><li class="dropdown-item"><!----> <a href="/web-browser/base/4.window/1.index.html" class="nav-link">
  四.浏览器对象
</a></li><li class="dropdown-item"><!----> <a href="/web-browser/base/5.document/1.index.html" class="nav-link">
  五.文档对象
</a></li><li class="dropdown-item"><!----> <a href="/web-browser/base/3.browser/1.index.html" class="nav-link">
  三.浏览器
</a></li><li class="dropdown-item"><!----> <a href="/web-browser/base/4.network/1.index.html" class="nav-link">
  四.web网络
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="高级知识" class="dropdown-title"><span class="title">高级知识</span> <span class="arrow down"></span></button> <button type="button" aria-label="高级知识" class="mobile-dropdown-title"><span class="title">高级知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web-browser/senior/1.micro/1.index.html" class="nav-link">
  一.DOM Tree、CSSOM
</a></li><li class="dropdown-item"><!----> <a href="/web-browser/senior/2.typescript/1.index.html" class="nav-link">
  二.渲染、绘制
</a></li><li class="dropdown-item"><!----> <a href="/web-browser/senior/3.deploy/1.index.html" class="nav-link">
  三.会话
</a></li><li class="dropdown-item"><!----> <a href="/web-browser/senior/4.component/1.index.html" class="nav-link">
  四.事件循环
</a></li><li class="dropdown-item"><!----> <a href="/web-browser/senior/5.garbage/1.index.html" class="nav-link">
  五.垃圾回收
</a></li><li class="dropdown-item"><!----> <a href="/web-browser/senior/6.webkit/1.index.html" class="nav-link">
  六.webkit深入
</a></li><li class="dropdown-item"><!----> <a href="/web-browser/senior/7.engine/1.index.html" class="nav-link">
  七.引擎
</a></li><li class="dropdown-item"><!----> <a href="/web-browser/senior/8.v8/1.index.html" class="nav-link">
  八.v8
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Vue 2.x源码" class="dropdown-title"><span class="title">Vue 2.x源码</span> <span class="arrow down"></span></button> <button type="button" aria-label="Vue 2.x源码" class="mobile-dropdown-title"><span class="title">Vue 2.x源码</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web-browser/source/vue-cli2.x/1.index.html" class="nav-link">
  一.Vue/cli2.x
</a></li><li class="dropdown-item"><!----> <a href="/web-browser/source/vue2.x/1.index.html" class="nav-link">
  二.Vue 2.x
</a></li><li class="dropdown-item"><!----> <a href="/web-browser/source/vue-router3.x/1.index.html" class="nav-link">
  三.Vue-Router3.x
</a></li></ul></div></div><div class="nav-item"><a href="/web-browser/read.html" class="nav-link">
  Vue相关资料推荐
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础知识" class="dropdown-title"><span class="title">基础知识</span> <span class="arrow down"></span></button> <button type="button" aria-label="基础知识" class="mobile-dropdown-title"><span class="title">基础知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web-browser/base/engine/1.index.html" class="nav-link">
  一.DOM
</a></li><li class="dropdown-item"><!----> <a href="/web-browser/base/project/1.index.html" class="nav-link">
  二.浏览器 API
</a></li><li class="dropdown-item"><!----> <a href="/web-browser/base/vue2.x/1.index.html" class="nav-link">
  三.网络
</a></li><li class="dropdown-item"><!----> <a href="/web-browser/base/vue3.x/1.index.html" class="nav-link">
  四.权限
</a></li><li class="dropdown-item"><!----> <a href="/web-browser/base/4.window/1.index.html" class="nav-link">
  四.浏览器对象
</a></li><li class="dropdown-item"><!----> <a href="/web-browser/base/5.document/1.index.html" class="nav-link">
  五.文档对象
</a></li><li class="dropdown-item"><!----> <a href="/web-browser/base/3.browser/1.index.html" class="nav-link">
  三.浏览器
</a></li><li class="dropdown-item"><!----> <a href="/web-browser/base/4.network/1.index.html" class="nav-link">
  四.web网络
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="高级知识" class="dropdown-title"><span class="title">高级知识</span> <span class="arrow down"></span></button> <button type="button" aria-label="高级知识" class="mobile-dropdown-title"><span class="title">高级知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web-browser/senior/1.micro/1.index.html" class="nav-link">
  一.DOM Tree、CSSOM
</a></li><li class="dropdown-item"><!----> <a href="/web-browser/senior/2.typescript/1.index.html" class="nav-link">
  二.渲染、绘制
</a></li><li class="dropdown-item"><!----> <a href="/web-browser/senior/3.deploy/1.index.html" class="nav-link">
  三.会话
</a></li><li class="dropdown-item"><!----> <a href="/web-browser/senior/4.component/1.index.html" class="nav-link">
  四.事件循环
</a></li><li class="dropdown-item"><!----> <a href="/web-browser/senior/5.garbage/1.index.html" class="nav-link">
  五.垃圾回收
</a></li><li class="dropdown-item"><!----> <a href="/web-browser/senior/6.webkit/1.index.html" class="nav-link">
  六.webkit深入
</a></li><li class="dropdown-item"><!----> <a href="/web-browser/senior/7.engine/1.index.html" class="nav-link">
  七.引擎
</a></li><li class="dropdown-item"><!----> <a href="/web-browser/senior/8.v8/1.index.html" class="nav-link">
  八.v8
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Vue 2.x源码" class="dropdown-title"><span class="title">Vue 2.x源码</span> <span class="arrow down"></span></button> <button type="button" aria-label="Vue 2.x源码" class="mobile-dropdown-title"><span class="title">Vue 2.x源码</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web-browser/source/vue-cli2.x/1.index.html" class="nav-link">
  一.Vue/cli2.x
</a></li><li class="dropdown-item"><!----> <a href="/web-browser/source/vue2.x/1.index.html" class="nav-link">
  二.Vue 2.x
</a></li><li class="dropdown-item"><!----> <a href="/web-browser/source/vue-router3.x/1.index.html" class="nav-link">
  三.Vue-Router3.x
</a></li></ul></div></div><div class="nav-item"><a href="/web-browser/read.html" class="nav-link">
  Vue相关资料推荐
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/web-browser/base/3.browser/1.index.html" class="sidebar-link">浏览器</a></li><li><a href="/web-browser/base/3.browser/1.compiler.html" class="sidebar-link">一.V8 的编译过程</a></li><li><a href="/web-browser/base/3.browser/2.garbage.html" class="sidebar-link">二.什么是垃圾</a></li><li><a href="/web-browser/base/3.browser/3.context.html" class="sidebar-link">三.实现执行上下文栈</a></li><li><a href="/web-browser/base/3.browser/4.clouser.html" class="sidebar-link">四.实现闭包</a></li><li><a href="/web-browser/base/3.browser/5.v8.html" class="sidebar-link">五.V8的垃圾回收机制</a></li><li><a href="/web-browser/base/3.browser/6.performance.html" class="sidebar-link">六.V8 的性能优化</a></li><li><a href="/web-browser/base/3.browser/16.拖拽和原生拖拽事件.html" class="sidebar-link">七</a></li><li><a href="/web-browser/base/3.browser/17.手机的 touch gesture 事件模型.html" class="sidebar-link">八</a></li><li><a href="/web-browser/base/3.browser/22.Ajax 同源策略和跨域.html" class="sidebar-link">九</a></li><li><a href="/web-browser/base/3.browser/26.内存管理.html" class="active sidebar-link">二十六.内存管理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web-browser/base/3.browser/26.内存管理.html#_1-javascript-中的垃圾收集" class="sidebar-link">1.javascript 中的垃圾收集</a></li><li class="sidebar-sub-header"><a href="/web-browser/base/3.browser/26.内存管理.html#_1-1nodejs-中的内存管理" class="sidebar-link">1.1NodeJS 中的内存管理</a></li><li class="sidebar-sub-header"><a href="/web-browser/base/3.browser/26.内存管理.html#_1-2-v8-内存管理" class="sidebar-link">1.2 v8 内存管理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web-browser/base/3.browser/26.内存管理.html#_1-2-1-v8-内存限制" class="sidebar-link">1.2.1 v8 内存限制</a></li><li class="sidebar-sub-header"><a href="/web-browser/base/3.browser/26.内存管理.html#_1-2-2-v8-内存管理" class="sidebar-link">1.2.2 v8 内存管理</a></li></ul></li><li class="sidebar-sub-header"><a href="/web-browser/base/3.browser/26.内存管理.html#为何限制内存大小" class="sidebar-link">为何限制内存大小</a></li><li class="sidebar-sub-header"><a href="/web-browser/base/3.browser/26.内存管理.html#如何打开内存限制" class="sidebar-link">如何打开内存限制</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web-browser/base/3.browser/26.内存管理.html#一旦初始化成功-生效后不能再修改" class="sidebar-link">一旦初始化成功，生效后不能再修改</a></li><li class="sidebar-sub-header"><a href="/web-browser/base/3.browser/26.内存管理.html#max-new-space-size-最大-new-space-大小-执行-scavenge-回收-默认-16m-单位-kb" class="sidebar-link">-max-new-space-size,最大 new space 大小，执行 scavenge 回收，默认 16M，单位 KB</a></li><li class="sidebar-sub-header"><a href="/web-browser/base/3.browser/26.内存管理.html#max-old-space-size-最大-old-sapce-大小-执行-marksweep-回收-默认-1g-单位-mb" class="sidebar-link">-max-old-space-size，最大 old sapce 大小，执行 MarkSweep 回收，默认 1G，单位 MB</a></li></ul></li><li class="sidebar-sub-header"><a href="/web-browser/base/3.browser/26.内存管理.html#v8-的垃圾回收机制" class="sidebar-link">V8 的垃圾回收机制</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web-browser/base/3.browser/26.内存管理.html#v8-是基于分代的垃圾回收" class="sidebar-link">V8 是基于分代的垃圾回收</a></li><li class="sidebar-sub-header"><a href="/web-browser/base/3.browser/26.内存管理.html#不同代垃圾回收机制也不一样" class="sidebar-link">不同代垃圾回收机制也不一样</a></li><li class="sidebar-sub-header"><a href="/web-browser/base/3.browser/26.内存管理.html#按存货的时间分为新生代和老生代" class="sidebar-link">按存货的时间分为新生代和老生代</a></li></ul></li><li class="sidebar-sub-header"><a href="/web-browser/base/3.browser/26.内存管理.html#分代" class="sidebar-link">分代</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web-browser/base/3.browser/26.内存管理.html#年龄小的是新生代-由-from-区域和-to-区域两个区域组成" class="sidebar-link">年龄小的是新生代，由 From 区域和 To 区域两个区域组成</a></li><li class="sidebar-sub-header"><a href="/web-browser/base/3.browser/26.内存管理.html#引用计数" class="sidebar-link">引用计数</a></li><li class="sidebar-sub-header"><a href="/web-browser/base/3.browser/26.内存管理.html#新生代垃圾回收" class="sidebar-link">新生代垃圾回收</a></li><li class="sidebar-sub-header"><a href="/web-browser/base/3.browser/26.内存管理.html#老生代" class="sidebar-link">老生代</a></li><li class="sidebar-sub-header"><a href="/web-browser/base/3.browser/26.内存管理.html#mark-sweep-标记清除" class="sidebar-link">mark-sweep（标记清除）</a></li><li class="sidebar-sub-header"><a href="/web-browser/base/3.browser/26.内存管理.html#mark-compact-标记整理" class="sidebar-link">mark-compact(标记整理)</a></li><li class="sidebar-sub-header"><a href="/web-browser/base/3.browser/26.内存管理.html#incrementtal-marking-增量标记" class="sidebar-link">incrementtal marking 增量标记</a></li></ul></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="二十六-内存管理"><a href="#二十六-内存管理" class="header-anchor">#</a> 二十六.内存管理</h1> <h2 id="_1-javascript-中的垃圾收集"><a href="#_1-javascript-中的垃圾收集" class="header-anchor">#</a> 1.javascript 中的垃圾收集</h2> <ul><li>程序的运行需要内存，只要程序要求，操作系统就必须提供内存</li> <li>javascript 使用自动内存管理，这被称为&quot;垃圾回收机制&quot;</li> <li>优点是可以简化开发、节省代码</li> <li>缺点是无法完整的掌握内存的分配与回收的具体过程</li></ul> <h2 id="_1-1nodejs-中的内存管理"><a href="#_1-1nodejs-中的内存管理" class="header-anchor">#</a> 1.1NodeJS 中的内存管理</h2> <ul><li>网页端的内存泄漏</li> <li>对于持续运行的服务进程 Node 服务器端程序，必须及时释放不再用到的内存。否则，内存占用越来越高，轻则影响系统性能，重则导致进程崩溃。</li> <li>如果不再用到内存没有及时释放，就叫做内存泄漏</li></ul> <h2 id="_1-2-v8-内存管理"><a href="#_1-2-v8-内存管理" class="header-anchor">#</a> 1.2 v8 内存管理</h2> <h3 id="_1-2-1-v8-内存限制"><a href="#_1-2-1-v8-内存限制" class="header-anchor">#</a> 1.2.1 v8 内存限制</h3> <ul><li>在 64 位操作系统可以使用 1.4G 内存</li> <li>在 32 位操作系统可以使用 0.7G 内存</li></ul> <h3 id="_1-2-2-v8-内存管理"><a href="#_1-2-2-v8-内存管理" class="header-anchor">#</a> 1.2.2 v8 内存管理</h3> <ul><li>js 对象都是通过 v8 进行分配管理内存的</li> <li>process.memoryUsage 返回一个对象，包含了 Node 进程的内存占用信息</li></ul> <p><img src="/web-browser/assets/img/node_memory.311c9934.png" alt=""></p> <ul><li>rss(resident set size):所有内存占用，包括指令区和堆栈</li></ul> <ul><li><p>heap Tatal:&quot;堆&quot;占用的内存，包括用到的和没用到的</p></li> <li><p>heapUsed：用到的堆的部分。判断内存泄漏，以 headUsed 字段为准</p></li> <li><p>external:V8 引擎内部的 C++对象占用的内存
<img src="/web-browser/assets/img/2.0b5b28c9.png" alt=""></p></li></ul> <h2 id="为何限制内存大小"><a href="#为何限制内存大小" class="header-anchor">#</a> 为何限制内存大小</h2> <h4 id="因为-v8-垃圾收集工作原理导致的-1-4g-内存完成一次垃圾收集需要-1-秒以上"><a href="#因为-v8-垃圾收集工作原理导致的-1-4g-内存完成一次垃圾收集需要-1-秒以上" class="header-anchor">#</a> 因为 V8 垃圾收集工作原理导致的，1.4G 内存完成一次垃圾收集需要 1 秒以上</h4> <h4 id="这个暂停时间成为-stop-the-word-在这个期间-应用性能和响应能力都会下降"><a href="#这个暂停时间成为-stop-the-word-在这个期间-应用性能和响应能力都会下降" class="header-anchor">#</a> 这个暂停时间成为 Stop The Word，在这个期间，应用性能和响应能力都会下降</h4> <h2 id="如何打开内存限制"><a href="#如何打开内存限制" class="header-anchor">#</a> 如何打开内存限制</h2> <h3 id="一旦初始化成功-生效后不能再修改"><a href="#一旦初始化成功-生效后不能再修改" class="header-anchor">#</a> 一旦初始化成功，生效后不能再修改</h3> <h3 id="max-new-space-size-最大-new-space-大小-执行-scavenge-回收-默认-16m-单位-kb"><a href="#max-new-space-size-最大-new-space-大小-执行-scavenge-回收-默认-16m-单位-kb" class="header-anchor">#</a> -max-new-space-size,最大 new space 大小，执行 scavenge 回收，默认 16M，单位 KB</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>node --max-old-space-size=2000 app.js 单位是M
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="max-old-space-size-最大-old-sapce-大小-执行-marksweep-回收-默认-1g-单位-mb"><a href="#max-old-space-size-最大-old-sapce-大小-执行-marksweep-回收-默认-1g-单位-mb" class="header-anchor">#</a> -max-old-space-size，最大 old sapce 大小，执行 MarkSweep 回收，默认 1G，单位 MB</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>node --max-new-space-size=1024 app.js单位是kb
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="v8-的垃圾回收机制"><a href="#v8-的垃圾回收机制" class="header-anchor">#</a> V8 的垃圾回收机制</h2> <h3 id="v8-是基于分代的垃圾回收"><a href="#v8-是基于分代的垃圾回收" class="header-anchor">#</a> V8 是基于分代的垃圾回收</h3> <h3 id="不同代垃圾回收机制也不一样"><a href="#不同代垃圾回收机制也不一样" class="header-anchor">#</a> 不同代垃圾回收机制也不一样</h3> <h3 id="按存货的时间分为新生代和老生代"><a href="#按存货的时间分为新生代和老生代" class="header-anchor">#</a> 按存货的时间分为新生代和老生代</h3> <h2 id="分代"><a href="#分代" class="header-anchor">#</a> 分代</h2> <h3 id="年龄小的是新生代-由-from-区域和-to-区域两个区域组成"><a href="#年龄小的是新生代-由-from-区域和-to-区域两个区域组成" class="header-anchor">#</a> 年龄小的是新生代，由 From 区域和 To 区域两个区域组成</h3> <ul><li>在 64 位系统里，新生代内存时 32M，From 区域和 To 区域各占用 16M</li> <li>在 32 位系统里，新生代内存时 16M，From 区域和 To 区域各占用 8M</li></ul> <ul><li>年龄大的是老生代，默认情况下
<ul><li>64 位系统下老生代内存时 1400M</li> <li>32 位系统下老生代内存时 700M</li></ul></li></ul> <h3 id="引用计数"><a href="#引用计数" class="header-anchor">#</a> 引用计数</h3> <ul><li>语言引擎有一张引用表，保存了内存里面所有的资源的引用次数</li> <li>如果一个值的引用次数是 0，就表示这个值不再用到了，因此可以将这块内存释放。</li></ul> <h3 id="新生代垃圾回收"><a href="#新生代垃圾回收" class="header-anchor">#</a> 新生代垃圾回收</h3> <ul><li>新生代区域一分为二，每个 16M，一个使用，一个空闲</li> <li>开始垃圾回收的时候，会检查 FROM 区域中的存活对象，如果还活着，拷贝到 TO 空间，完成后释放空间。</li> <li>完成后 FROM 和 TO 互换</li> <li>新生代扫描的时候是一种广度优先的扫描策略</li> <li>新生代的空间小，存活对象少</li> <li>当一个对象经历过多次的垃圾回收依然存活的时候，生存周期比较长的对象会被移动到老生代，这个移动的过程被称为晋升或者升级</li></ul> <h3 id="老生代"><a href="#老生代" class="header-anchor">#</a> 老生代</h3> <ul><li>mark-Sweep（标记清除）mark-compact（标记整理）</li> <li>老生代空间大，大部分都是活着的对象，GC 耗时比较长</li> <li>在 GC 期间无法响应，STOP-THE-WORLD</li> <li>V8 有一个优化方案，增量处理，把一个大暂停换成多个小暂停 INCREMENT-GC</li></ul> <h3 id="mark-sweep-标记清除"><a href="#mark-sweep-标记清除" class="header-anchor">#</a> mark-sweep（标记清除）</h3> <ul><li>标记活着的对象，随后清除在标记阶段没有标记的对象，只清理死亡对象</li> <li>问题在于清除后会出现内存不连续的情况，这种内存碎片会对后续的内存分配产生影响</li> <li>如果要分配一个大对象，碎片空间无法分配</li></ul> <h3 id="mark-compact-标记整理"><a href="#mark-compact-标记整理" class="header-anchor">#</a> mark-compact(标记整理)</h3> <ul><li>标记死亡后会对对象进行整理，活着的对象向左移动，移动完成后直接清理掉边界外的内存</li></ul> <h3 id="incrementtal-marking-增量标记"><a href="#incrementtal-marking-增量标记" class="header-anchor">#</a> incrementtal marking 增量标记</h3> <ul><li>以上三种回收是都需要暂停程序执行，收集完成后才能恢复， STOP-THE-WORLD 在新生代影响不大，但是老生带影响就非常大了。</li> <li>增量标记就是把标记改为增量标记，把一口气的停顿拆分成了多个小步骤，做完一步程序运行一会儿，垃圾回收和应用程序运行交替进行，停顿是按可以减少到 1/6 左右，包括垃圾会后的占用时间</li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2022/7/24 上午11:20:14</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/web-browser/base/3.browser/22.Ajax 同源策略和跨域.html" class="prev">
        九
      </a></span> <!----></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/web-browser/assets/js/app.91129274.js" defer></script><script src="/web-browser/assets/js/2.cc19c250.js" defer></script><script src="/web-browser/assets/js/7.93528168.js" defer></script><script src="/web-browser/assets/js/3.2443f8b6.js" defer></script>
  </body>
</html>
